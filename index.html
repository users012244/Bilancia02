<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Bilancia Digitale Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #scale-container {
            text-align: center;
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        #weight-display {
            font-size: 2rem;
            margin: 20px 0;
            color: #333;
        }
        #weight-area {
            width: 300px;
            height: 200px;
            border: 3px dashed #007bff;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="scale-container">
        <h1>Bilancia Digitale Web</h1>
        <div id="weight-area">
            Posiziona l'oggetto qui
        </div>
        <div id="weight-display">0.00 g</div>
        <button id="calibrate-btn">Calibra Bilancia</button>
    </div>

    <script>
        // Classe per gestire la bilancia digitale
        class DigitalScale {
            constructor() {
                this.weightArea = document.getElementById('weight-area');
                this.weightDisplay = document.getElementById('weight-display');
                this.calibrateBtn = document.getElementById('calibrate-btn');
                
                // Stato di calibrazione
                this.baselineWeight = 0;
                this.isCalibrated = false;

                // Listener per gli eventi
                this.weightArea.addEventListener('touchstart', this.startWeighing.bind(this));
                this.weightArea.addEventListener('touchmove', this.calculateWeight.bind(this));
                this.weightArea.addEventListener('touchend', this.stopWeighing.bind(this));
                
                // Listener per calibrazione
                this.calibrateBtn.addEventListener('click', this.calibrateScale.bind(this));
            }

            // Metodo per calibrare la bilancia
            calibrateScale() {
                this.baselineWeight = 0;
                this.isCalibrated = true;
                this.weightDisplay.textContent = 'Bilancia Calibrata: 0.00 g';
                this.weightArea.style.backgroundColor = '#e6f2ff';
            }

            // Inizio misurazione peso
            startWeighing(event) {
                if (!this.isCalibrated) {
                    alert('Calibra prima la bilancia!');
                    return;
                }
                
                // Usa l'accelerometro se disponibile
                if ('DeviceMotionEvent' in window) {
                    window.addEventListener('devicemotion', this.calculateWeight.bind(this));
                }
            }

            // Calcolo del peso
            calculateWeight(event) {
                if (!this.isCalibrated) return;

                let weight = 0;
                
                // Metodi di rilevamento peso
                if (event.touches && event.touches[0]) {
                    // Pressione del touch
                    const pressure = event.touches[0].force || 0;
